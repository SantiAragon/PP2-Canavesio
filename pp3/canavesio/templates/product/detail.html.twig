{% extends 'base.html.twig' %}

{% block stylesheets %}
<link href="{{ asset('styles/listaproductos.css') }}" rel="stylesheet">
{% endblock %}

{% block title %}{{ product.name }}{% endblock %}

{% block body %}
    <div class="producto-detalle-container">
        <div class="producto-detalle">
            <div class="producto-imagen-detalle">
                {% if product.image %}
                    <img src="data:image/jpeg;base64,{{ product.image }}" alt="{{ product.name }}">
                {% endif %}
            </div>
            <div class="producto-info-detalle">
                <h1>{{ product.name }}</h1>
                <p class="precio">${{ product.price }}</p>
                <p class="descripcion">{{ product.description }}</p>
                
                <div class="producto-acciones">
                    <form action="{{ path('cart_add_product', {productId: product.id}) }}" method="post">
                        <div class="cantidad-container">
                            <label for="quantity">Cantidad:</label>
                            <input type="number" id="quantity" name="quantity" min="1" max="{{ product.quantity }}" value="1" required>
                        </div>
                        <button type="submit" class="btn">Agregar al carrito</button>
                    </form>

                    <form action="{{ path('create-preference') }}" method="get">
                        <button type="submit" class="btn">Ir al Pago</button>
                    </form>

                    {% if product.id not in favoriteProductIds %}
    <form action="{{ path('add_favorite', {id: product.id}) }}" method="post">
        <button type="submit" class="btn">Agregar a Favoritos</button>
    </form>
    <a class="button-volver" href="{{ path('product_list') }}"> Volver</a>
{% else %}
    
    <button class="btn btn-warning" disabled>En Favoritos</button>
{% endif %}
                </div>
            </div>
        </div>
    </div>
{% endblock %}