{% extends 'base.html.twig' %}

{% block title %}Crear Receta de Producto{% endblock %}

{% block body %}
<h1>Crear Receta de Producto</h1>

<form method="post" action="{{ path('create_recipe_product') }}">
    <label for="recipe_name">Nombre de la Receta:</label>
    <input type="text" id="recipe_name" name="recipe_name" required>

    <h2>Piezas</h2>
    <div id="parts">
        <div class="part">
            <label for="part_id_0">ID de la Pieza:</label>
            <input type="number" id="part_id_0" name="parts[0][id]">
            <label for="part_name_0">Nombre:</label>
            <input type="text" id="part_name_0" name="parts[0][name]">
            <label for="part_quantity_0">Cantidad:</label>
            <input type="number" id="part_quantity_0" name="parts[0][quantity]" min="1">
            <label for="part_brand_0">Marca:</label>
            <input type="text" id="part_brand_0" name="parts[0][brand]">
        </div>
    </div>
    <button type="button" id="add-part">Agregar Pieza</button>

    <button type="submit">Crear Receta</button>
</form>

<script>
    let partIndex = 1;
    document.getElementById('add-part').addEventListener('click', () => {
        const partDiv = document.createElement('div');
        partDiv.classList.add('part');
        partDiv.innerHTML = `
            <label for="part_id_${partIndex}">ID de la Pieza:</label>
            <input type="number" id="part_id_${partIndex}" name="parts[${partIndex}][id]">
            <label for="part_name_${partIndex}">Nombre:</label>
            <input type="text" id="part_name_${partIndex}" name="parts[${partIndex}][name]">
            <label for="part_quantity_${partIndex}">Cantidad:</label>
            <input type="number" id="part_quantity_${partIndex}" name="parts[${partIndex}][quantity]" min="1">
            <label for="part_brand_${partIndex}">Marca:</label>
            <input type="text" id="part_brand_${partIndex}" name="parts[${partIndex}][brand]">`;
        document.getElementById('parts').appendChild(partDiv);
        partIndex++;
    });
</script>
{% endblock %}